// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            BigInt   @id @default(autoincrement())
  tgId          BigInt   @unique
  tgUsername    String?
  firstName     String?
  lastName      String?
  profileImg    String?
  isPremium     Boolean  @default(false)
  refCode       String   @unique
  referBy       BigInt?
  langCode      String?
  walletNetwork String?
  walletAddress String?
  walletBalance BigInt?
  totalPoints   BigInt   @default(0)
  extInfo       String?
  traceId       String?
  createBy      BigInt?
  createDt      DateTime @default(now())
  modifyBy      BigInt?
  modifyDt      DateTime @updatedAt
}

model UserAction {
  id                BigInt   @id @default(autoincrement())
  opTgId            BigInt   @unique
  opDisplayName     String?
  actionType        String
  selfReward        BigInt?
  targetTgId        BigInt?
  targetReward      BigInt?
  targetDisplayName String?
  extInfo           String?
  traceId           String?
  createBy          BigInt?
  createDt          DateTime @default(now())
  modifyBy          BigInt?
  modifyDt          DateTime @updatedAt
}

model Wallet {
  id         BigInt   @id @default(autoincrement())
  network    String?
  address    String   @unique
  balance    BigInt?
  privateKey String?
  mnemonic   String?
  extInfo    String?
  traceId    String?
  createBy   BigInt?
  createDt   DateTime @default(now())
  modifyBy   BigInt?
  modifyDt   DateTime @updatedAt
}

model WalletOrder {
  id       BigInt   @id @default(autoincrement())
  type     String
  walletId BigInt
  opAmount BigInt?
  opTgId   BigInt?
  txHash   String?
  extInfo  String?
  traceId  String?
  createBy BigInt?
  createDt DateTime @default(now())
  modifyBy BigInt?
  modifyDt DateTime @updatedAt
}

model Chat {
  id           BigInt    @id @default(autoincrement())
  chatId       BigInt
  // group | supergroup | channel
  chatType     String
  // group or channel name
  chatTitle    String
  // public link name suffix, e.g. https://t.me/chatUsername
  chatUsername String?
  chatLangCode String?
  inviterTgId  BigInt
  // status: "member" | "creator" | "administrator" | "restricted" | "left" | "kicked"
  botStatus    String
  memecoin     Memecoin? @relation(fields: [memecoinId], references: [id])
  memecoinId   BigInt?   @unique
}

model Memecoin {
  id               BigInt   @id @default(autoincrement())
  network          String?
  name             String?
  ticker           String?
  description      String?
  image            String?
  devTgId          BigInt?
  coinStatus       String?
  contractVersion  String?
  deployTxHash     String?
  masterAddress    String?
  devWalletAddress String?
  opWalletAddress  String?
  extInfo          String?
  traceId          String?
  createBy         BigInt?
  createDt         DateTime @default(now())
  modifyBy         BigInt?
  modifyDt         DateTime @updatedAt
  chat             Chat?
}

model BuyOrder {
  id         BigInt   @id @default(autoincrement())
  memecoinId BigInt
  buyAmt     BigInt?
  fromCoin   String?
  fromAmt    BigInt?
  txHash     String?
  extInfo    String?
  traceId    String?
  createBy   BigInt?
  createDt   DateTime @default(now())
  modifyBy   BigInt?
  modifyDt   DateTime @updatedAt
}

model SellOrder {
  id         BigInt   @id @default(autoincrement())
  memecoinId BigInt
  sellAmt    BigInt?
  toCoin     String?
  toAmt      BigInt?
  txHash     String?
  extInfo    String?
  traceId    String?
  createBy   BigInt?
  createDt   DateTime @default(now())
  modifyBy   BigInt?
  modifyDt   DateTime @updatedAt
}
